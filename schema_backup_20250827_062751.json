{
  "version": 1,
  "collections": [
    {
      "collection": "app_users",
      "schema": { "name": "app_users" },
      "fields": [
        { "field": "sex", "type": "string" },
        { "field": "level", "type": "integer", "schema": { "default_value": 1 } },
        { "field": "xp", "type": "integer", "schema": { "default_value": 0 } },
        { "field": "needs", "type": "json" },
        { "field": "bio", "type": "text" },
        { "field": "location", "type": "string" },
        { "field": "join_date", "type": "datetime" },
        { "field": "is_ghost", "type": "boolean", "schema": { "default_value": false } },
        { "field": "match_info", "type": "json" },
        { "field": "profile_color", "type": "string" },
        { "field": "subscription_tier", "type": "string" },
        { "field": "parents", "type": "json" },
        { "field": "children", "type": "json" },
        { "field": "pending_received_relationship_requests", "type": "json" },
        { "field": "privacy_settings", "type": "json" },
        { "field": "security_settings", "type": "json" },
        { "field": "chat_settings", "type": "json" },
        { "field": "mailbox_settings", "type": "json" },
        { "field": "pinned_friends", "type": "json" },
        { "field": "unlocked_achievement_ids", "type": "json" },
        { "field": "placed_furniture", "type": "json" },
        { "field": "daily_reward_state", "type": "json" },
        { "field": "settings", "type": "json" },
        { "field": "coins", "type": "integer", "schema": { "default_value": 0 } },
        { "field": "gems", "type": "integer", "schema": { "default_value": 0 } },
        { "field": "volts", "type": "integer", "schema": { "default_value": 0 } },
        { "field": "equipped_items", "type": "json" },
        { "field": "last_login", "type": "datetime" },
        { "field": "last_work_timestamp", "type": "bigint" },
        { "field": "last_ip", "type": "string" },
        { "field": "last_location", "type": "string" },
        { "field": "last_latitude", "type": "float" },
        { "field": "last_longitude", "type": "float" },
        { "field": "online", "type": "boolean", "schema": { "default_value": false } },
        { "field": "last_seen", "type": "datetime" },
        { "field": "mac_address", "type": "string" },
        { "field": "device_info", "type": "json" },
        { "field": "birth_date", "type": "date" },
        { "field": "parent_email", "type": "string" }
      ]
    },
    {
      "collection": "shop_items",
      "schema": { "name": "shop_items" },
      "fields": [
        { "field": "name", "type": "string" },
        { "field": "category", "type": "string" },
        { "field": "subcategory", "type": "string" },
        { "field": "price_coins", "type": "integer" },
        { "field": "price_gems", "type": "integer" },
        { "field": "image_url", "type": "string" },
        { "field": "keywords", "type": "json" },
        { "field": "asset_url", "type": "string" }
      ]
    },
    {
      "collection": "furniture_items",
      "schema": { "name": "furniture_items" },
      "fields": [
        { "field": "name", "type": "string" },
        { "field": "category", "type": "string" },
        { "field": "subcategory", "type": "string" },
        { "field": "price_coins", "type": "integer" },
        { "field": "price_gems", "type": "integer" },
        { "field": "images", "type": "json" },
        { "field": "keywords", "type": "json" },
        { "field": "width", "type": "integer" },
        { "field": "height", "type": "integer" },
        { "field": "collider", "type": "json" }
      ]
    },
    {
      "collection": "direct_messages",
      "schema": { "name": "direct_messages" },
      "fields": [
        { "field": "sender_id", "type": "uuid" },
        { "field": "receiver_id", "type": "uuid" },
        { "field": "text", "type": "text" },
        { "field": "attachments", "type": "json" },
        { "field": "reactions", "type": "json" },
        { "field": "reply_to", "type": "string" },
        { "field": "is_read", "type": "boolean", "schema": { "default_value": false } },
        { "field": "is_edited", "type": "boolean", "schema": { "default_value": false } },
        { "field": "is_deleted", "type": "boolean", "schema": { "default_value": false } },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "notifications",
      "schema": { "name": "notifications" },
      "fields": [
        { "field": "receiver_id", "type": "uuid" },
        { "field": "sender_id", "type": "uuid" },
        { "field": "type", "type": "string" },
        { "field": "subject", "type": "text" },
        { "field": "content", "type": "text" },
        { "field": "is_read", "type": "boolean", "schema": { "default_value": false } },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "reports",
      "schema": { "name": "reports" },
      "fields": [
        { "field": "reporter_id", "type": "uuid" },
        { "field": "reported_user_id", "type": "uuid" },
        { "field": "type", "type": "string" },
        { "field": "status", "type": "string", "schema": { "default_value": "Pending" } },
        { "field": "is_severe", "type": "boolean", "schema": { "default_value": false } },
        { "field": "reported_content", "type": "text" },
        { "field": "reporter_comments", "type": "text" },
        { "field": "context", "type": "json" },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "support_tickets",
      "schema": { "name": "support_tickets" },
      "fields": [
        { "field": "user_id", "type": "uuid" },
        { "field": "subject", "type": "text" },
        { "field": "status", "type": "string", "schema": { "default_value": "Open" } },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "support_ticket_messages",
      "schema": { "name": "support_ticket_messages" },
      "fields": [
        { "field": "ticket_id", "type": "string" },
        { "field": "sender_id", "type": "uuid" },
        { "field": "message", "type": "text" },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "currency_packs",
      "schema": { "name": "currency_packs" },
      "fields": [
        { "field": "type", "type": "string" },
        { "field": "name", "type": "string" },
        { "field": "amount", "type": "integer" },
        { "field": "bonus", "type": "integer", "schema": { "default_value": 0 } },
        { "field": "price", "type": "decimal" },
        { "field": "icon", "type": "string" },
        { "field": "tag", "type": "string" }
      ]
    },
    {
      "collection": "punishments",
      "schema": { "name": "punishments" },
      "fields": [
        { "field": "user_id", "type": "uuid" },
        { "field": "moderator_id", "type": "uuid" },
        { "field": "sanction_type", "type": "string" },
        { "field": "reason_key", "type": "string" },
        { "field": "duration_ms", "type": "bigint" },
        { "field": "expires_at", "type": "timestamp" },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "profile_comments",
      "schema": { "name": "profile_comments" },
      "fields": [
        { "field": "profile_owner_id", "type": "uuid" },
        { "field": "author_id", "type": "uuid" },
        { "field": "text", "type": "text" },
        { "field": "timestamp", "type": "timestamp" }
      ]
    },
    {
      "collection": "app_users_friends",
      "schema": { "name": "app_users_friends", "note": "Junction table for friends" },
      "fields": [
        { "field": "id", "type": "integer", "schema": { "is_primary_key": true, "has_auto_increment": true } },
        { "field": "app_users_id", "type": "uuid" },
        { "field": "friends_id", "type": "uuid" }
      ]
    },
    {
      "collection": "users_inventory",
      "schema": { "name": "users_inventory", "note": "Junction table for user inventory" },
      "fields": [
        { "field": "id", "type": "integer", "schema": { "is_primary_key": true, "has_auto_increment": true } },
        { "field": "app_users_id", "type": "uuid" },
        { "field": "shop_items_id", "type": "string" }
      ]
    },
    {
      "collection": "users_furniture",
      "schema": { "name": "users_furniture", "note": "Junction table for user furniture" },
      "fields": [
        { "field": "id", "type": "integer", "schema": { "is_primary_key": true, "has_auto_increment": true } },
        { "field": "app_users_id", "type": "uuid" },
        { "field": "furniture_items_id", "type": "string" }
      ]
    },
    {
      "collection": "users_blocked",
      "schema": { "name": "users_blocked", "note": "Junction table for blocked users" },
      "fields": [
        { "field": "id", "type": "integer", "schema": { "is_primary_key": true, "has_auto_increment": true } },
        { "field": "app_users_id", "type": "uuid" },
        { "field": "blocked_user_id", "type": "uuid" },
        { "field": "timestamp", "type": "timestamp" }
      ]
    }
  ],
  "relations": [
    { "collection": "app_users_friends", "field": "app_users_id", "related_collection": "app_users", "meta": { "one_field": "friends" } },
    { "collection": "app_users_friends", "field": "friends_id", "related_collection": "app_users" },
    { "collection": "users_inventory", "field": "app_users_id", "related_collection": "app_users", "meta": { "one_field": "inventory" } },
    { "collection": "users_inventory", "field": "shop_items_id", "related_collection": "shop_items" },
    { "collection": "users_furniture", "field": "app_users_id", "related_collection": "app_users", "meta": { "one_field": "furniture" } },
    { "collection": "users_furniture", "field": "furniture_items_id", "related_collection": "furniture_items" },
    { "collection": "users_blocked", "field": "app_users_id", "related_collection": "app_users", "meta": { "one_field": "blocked_users" } },
    { "collection": "users_blocked", "field": "blocked_user_id", "related_collection": "app_users" },
    { "collection": "profile_comments", "field": "profile_owner_id", "related_collection": "app_users", "meta": { "one_field": "comments" } },
    { "collection": "profile_comments", "field": "author_id", "related_collection": "app_users" },
    { "collection": "punishments", "field": "user_id", "related_collection": "app_users", "meta": { "one_field": "punishment_history" } },
    { "collection": "punishments", "field": "moderator_id", "related_collection": "app_users" },
    { "collection": "direct_messages", "field": "sender_id", "related_collection": "app_users" },
    { "collection": "direct_messages", "field": "receiver_id", "related_collection": "app_users" },
    { "collection": "notifications", "field": "receiver_id", "related_collection": "app_users", "meta": { "one_field": "notifications" } },
    { "collection": "notifications", "field": "sender_id", "related_collection": "app_users" },
    { "collection": "reports", "field": "reporter_id", "related_collection": "app_users" },
    { "collection": "reports", "field": "reported_user_id", "related_collection": "app_users" },
    { "collection": "support_tickets", "field": "user_id", "related_collection": "app_users" },
    { "collection": "support_ticket_messages", "field": "ticket_id", "related_collection": "support_tickets", "meta": { "one_field": "messages" }, "schema": { "on_delete": "CASCADE" } },
    { "collection": "support_ticket_messages", "field": "sender_id", "related_collection": "app_users" }
  ]
}
